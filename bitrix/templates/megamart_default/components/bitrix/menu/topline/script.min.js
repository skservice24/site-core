window.RS||(window.RS={}),RS.ToplineMenu=function(){var e=function(e){this.$el=$("#"+e),this.menuHeight=this.$el.outerHeight();var i=this.$el.find(".has-children");setTimeout(BX.proxy(this.resizeMenu,this),100),$(document).ready(BX.proxy(this.resizeMenu,this)),$(window).on("resize",BX.debounce(BX.proxy(this.resizeMenu,this),100)),i.on({mouseenter:this.reveal,mouseleave:this.conceal})};return e.prototype.resizeMenu=function(){var e,i,t=this.$el.children(),n=t.filter(".is-more"),o=this.$el.outerWidth(),s=0;for(this.$el.css({overflow:"hidden","max-height":this.menuHeight,opacity:"0"}),t.show(),n.insertAfter(t.filter(":last")),t=this.$el.children(),e=n.width(),t.filter(":not(.is-more)").each(function(e,i){var n=$(i).width();return s+n>o?(t.filter(":gt("+(e-1)+")").hide(),!1):(s+=n,!0)});;){if(!(s+e>o)){t.length-1>t.filter(":visible").length?(i=t.filter(":hidden:not(.is-more)").clone().show(),n.insertAfter(t.filter(":visible:last")),n.find(".topline-menu-item__dropdown").html(i),n.show()):(n.hide(),n.find(".topline-menu-item__dropdown").html(""));break}var r=t.filter(":visible:last");s-=r.width(),r.hide()}this.$el.css({overflow:"visible","max-height":"none",opacity:"1",visibility:"visible"})},e.prototype.reveal=function(){var e=$(this),i=e.children(".topline-menu-item__dropdown");e.closest(".topline-menu").width();i.show(),i.velocity("stop").velocity("transition.slideUpIn",{duration:300,delay:0})},e.prototype.conceal=function(){var e=$(this).children(".topline-menu-item__dropdown");e.velocity("stop").velocity("transition.fadeOut",{duration:100,delay:0,complete:function(){e.removeClass("is-invert"),e.css("left","")}})},e}();