!function(t,e,a){"use strict";var s;(t.RS||(t.RS={}),t.RS.GlobalCart)||(RS.GlobalBasket=function(e,s,i,o){this.itemRemoved=!1,this.siteId=e,this.templateName=s,this.arParams=o,this.ajaxPath=i,a.addCustomEvent(t,"OnBasketChange",this.refresh.bind(this))},RS.GlobalBasket.init=function(t,e,a,i){return s||(s=new RS.GlobalBasket(t,e,a,i)),s},RS.GlobalBasket.prototype={refresh:function(t){this.itemRemoved?this.itemRemoved=!1:((t=t||{}).sessid=a.bitrix_sessid(),t.siteId=this.siteId,t.templateName=this.templateName,t.arParams=this.arParams,a.ajax({url:this.ajaxPath,method:"POST",dataType:"json",data:t,onsuccess:this.updateBlocks}))},updateBlocks:function(t){var s=e.querySelectorAll(".js-global-cart");if(void 0!==s)for(var i=0;i<s.length;i++){var o=s[i],r=o.querySelector(".js-global-cart__count");t.numProducts>0?o.classList.add("has-items"):o.classList.remove("has-items"),r&&(r.innerHTML=t.numProducts)}a.onCustomEvent("GlobalStateChanged")},removeItemFromCart:function(t){this.refreshCart({sbblRemoveItemFromCart:t}),this.itemRemoved=!0,a.onCustomEvent("OnBasketChange")}})}(window,document,BX);