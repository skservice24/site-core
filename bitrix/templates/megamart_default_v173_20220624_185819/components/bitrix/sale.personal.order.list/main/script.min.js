BX.namespace("BX.Sale.PersonalOrderComponent"),BX.Sale.PersonalOrderComponent.PersonalOrderList={init:function(e){var t=document.getElementsByClassName("sale-order-list-inner-row");e.paymentList=e.paymentList||{},e.url=e.url||"",e.templateName=e.templateName||"",Array.prototype.forEach.call(t,function(t){var a=t.getElementsByClassName("sale-order-list-shipment-id");a[0]&&Array.prototype.forEach.call(a,function(e){var t=e.parentNode.getElementsByClassName("sale-order-list-shipment-id-icon")[0];t&&BX.clipboard.bindCopyClick(t,{text:e.innerHTML})}),BX.bindDelegate(t,"click",{class:"ajax_reload"},BX.proxy(function(e){var a=t.getElementsByClassName("sale-order-list-inner-row-body")[0],s=t.getElementsByClassName("sale-order-list-inner-row-template")[0],n=s.getElementsByClassName("sale-order-list-cancel-payment")[0];BX.ajax({method:"POST",dataType:"html",url:e.target.href,data:{sessid:BX.bitrix_sessid()},onsuccess:BX.proxy(function(e){var t=document.createElement("div");t.innerHTML=e,s.insertBefore(t,n),a.style.display="none",s.style.display="block",BX.bind(n,"click",function(e){e.preventDefault(),a.style.display="flex",s.style.display="none",t.remove()},this)},this),onfailure:BX.proxy(function(){return this},this)},this),e.preventDefault()},this)),BX.bindDelegate(t,"click",{class:"sale-order-list-change-payment"},BX.proxy(function(a){a.preventDefault();var s=t.getElementsByClassName("sale-order-list-inner-row-body")[0],n=t.getElementsByClassName("sale-order-list-inner-row-template")[0],l=n.getElementsByClassName("sale-order-list-cancel-payment")[0];BX.ajax({method:"POST",dataType:"html",url:e.url,data:{sessid:BX.bitrix_sessid(),orderData:e.paymentList[a.target.id],templateName:e.templateName},onsuccess:BX.proxy(function(e){var t=document.createElement("div");t.innerHTML=e,n.insertBefore(t,l),a.target.style.display="none",s.parentNode.removeChild(s),n.style.display="block",BX.bind(l,"click",function(e){e.preventDefault(),window.location.reload()},this)},this),onfailure:BX.proxy(function(){return this},this)},this)},this))})}};